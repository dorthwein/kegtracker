    <div class="toolbar">  
        <h3 class="left" style="width:40%;">
            Invoice Maintenance
        </h3>
 
        <%= report_select_menu %>
    </div>

<div class="full sidebar">

   	<input type="button" value="New" class='new' data-role="none"/>
	<input type="button" value="Delete" class='delete' data-role="none"/>
    <input type="button" value="Excel" class='excelExport' data-role="none"/>       
    <button class=' jqxFilterToggle' data-role="none"> Filter Off </button>

    <div class="jqxGridColumnListBox">  </div>
</div>
<div class="full display">
    <div class="jqxGrid full display"></div>
</div>
<script>

$(document).ready(function(){
    //url = //system.server + $('.ui-page-active').attr('data-url') + '.json'   
/*
    a: x.bill_to_entity_description,
    b: x.invoice_number,
    c: x.date.to_i * 1000,
    d: x._id,    
*/
    var source = {
        datatype: "json",
        datafields: [
            { name: 'a', type: 'string'},
            { name: 'b', type: 'string'},
            { name: 'c', type: 'date'},            
            { name: 'd' },
        ], 
        url: location.href,
        updaterow: function (rowid, rowdata, commit) {
            // synchronize with the server - send update command
            // call commit with parameter true if the synchronization with the server is successful 
            // and with parameter false if the synchronization failder.     
            commit(true);
        }
        
    };

    window.dataAdapter = new $.jqx.dataAdapter(source, {
        beforeSend: function(jqXHR, settings){
                
        },
        loadComplete: function (data) { 
             
        },
        loadError: function (xhr, status, error) { }      
    });
//  window.dataAdapter = dataAdapter
    // Initialize Grid

    var gridSettings = settings.jqxGridProperties
    gridSettings['source'] = dataAdapter;
    gridSettings['columns'] = [
        { text: 'Bill To', datafield: 'a', filtertype: 'checkedlist' },
        { text: 'Invoice #', datafield: 'b'},
        { text: 'Date', datafield: 'c', cellsformat: 'd', filtertype: 'date' },
        { text: 'View', datafield: 'd', columntype: 'button', filterable:false, width:'75px', cellsrenderer: function (row) {
            return 'View'
        }, buttonclick: function (row) {
            var rowdata = $('.jqxGrid').jqxGrid('getrowdata', row);
            var url = location.href + "/" + rowdata['d'];
            openPopupWindow(url);
        }}, 
    ]
    
    $(".jqxGrid").jqxGrid( gridSettings );  
    jqxIntialize();
});

</script>

